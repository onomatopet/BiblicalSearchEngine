<Window x:Class="BiblicalSearchEngine.Views.AdvancedSearchWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Recherche Avancée" 
        Height="600" Width="800"
        WindowStartupLocation="CenterOwner">

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Titre -->
        <TextBlock Grid.Row="0" 
                   Text="Recherche Avancée" 
                   FontSize="20" 
                   FontWeight="Bold" 
                   Margin="0,0,0,20"/>

        <!-- Recherche principale -->
        <GroupBox Grid.Row="1" Header="Termes de recherche" Margin="0,0,0,10">
            <Grid Margin="10">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="150"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <Label Grid.Row="0" Grid.Column="0" Content="Tous ces mots:"/>
                <TextBox Grid.Row="0" Grid.Column="1" x:Name="AllWordsBox" Margin="0,2"/>

                <Label Grid.Row="1" Grid.Column="0" Content="Cette expression exacte:"/>
                <TextBox Grid.Row="1" Grid.Column="1" x:Name="ExactPhraseBox" Margin="0,2"/>

                <Label Grid.Row="2" Grid.Column="0" Content="Aucun de ces mots:"/>
                <TextBox Grid.Row="2" Grid.Column="1" x:Name="NoneWordsBox" Margin="0,2"/>
            </Grid>
        </GroupBox>

        <!-- Filtres -->
        <GroupBox Grid.Row="2" Header="Filtres" Margin="0,0,0,10">
            <Grid Margin="10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0">
                    <Label Content="Type de document:"/>
                    <ComboBox x:Name="TypeCombo">
                        <ComboBoxItem Content="Tous" IsSelected="True"/>
                        <ComboBoxItem Content="Bible"/>
                        <ComboBoxItem Content="Prédication"/>
                        <ComboBoxItem Content="Étude"/>
                        <ComboBoxItem Content="Commentaire"/>
                    </ComboBox>
                </StackPanel>

                <StackPanel Grid.Column="1" Margin="10,0">
                    <Label Content="Livre biblique:"/>
                    <ComboBox x:Name="BookCombo">
                        <ComboBoxItem Content="Tous" IsSelected="True"/>
                        <ComboBoxItem Content="Genèse"/>
                        <ComboBoxItem Content="Exode"/>
                        <ComboBoxItem Content="Matthieu"/>
                        <ComboBoxItem Content="Jean"/>
                    </ComboBox>
                </StackPanel>

                <StackPanel Grid.Column="2">
                    <Label Content="Tags:"/>
                    <TextBox x:Name="TagsBox" 
                             ToolTip="Séparez par des virgules"/>
                </StackPanel>
            </Grid>
        </GroupBox>

        <!-- Options de recherche -->
        <GroupBox Grid.Row="3" Header="Options" Margin="0,0,0,10">
            <StackPanel Margin="10">
                <CheckBox x:Name="FuzzyCheck" Content="Recherche approximative (tolère les fautes)" Margin="0,2"/>
                <CheckBox x:Name="StemCheck" Content="Recherche par racine (trouve les variantes)" Margin="0,2"/>
                <CheckBox x:Name="ProximityCheck" Content="Recherche de proximité" Margin="0,2"/>
                <Grid Margin="20,5,0,0" x:Name="ProximityGrid" Visibility="Collapsed">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="100"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Label Grid.Column="0" Content="Distance max:"/>
                    <TextBox Grid.Column="1" x:Name="ProximityDistance" Text="5" Margin="5,0"/>
                    <Label Grid.Column="2" Content="mots"/>
                </Grid>
            </StackPanel>
        </GroupBox>

        <!-- Aide syntaxe -->
        <Expander Grid.Row="4" Header="Aide - Syntaxe de recherche" Margin="0,0,0,10">
            <Border Background="LightGray" Padding="10">
                <TextBlock TextWrapping="Wrap">
                    <Bold>Opérateurs de recherche:</Bold><LineBreak/>
                    • AND : les deux termes doivent être présents<LineBreak/>
                    • OR : au moins un des termes doit être présent<LineBreak/>
                    • NOT : exclut les documents contenant ce terme<LineBreak/>
                    • "..." : recherche l'expression exacte<LineBreak/>
                    • * : joker (ex: roi* trouve roi, rois, royaume)<LineBreak/>
                    • NEAR/n : termes distants de n mots max<LineBreak/>
                    <LineBreak/>
                    <Bold>Exemples:</Bold><LineBreak/>
                    • "royaume de Dieu" AND parabole<LineBreak/>
                    • amour NEAR/5 prochain<LineBreak/>
                    • (foi OR espérance) NOT doute
                </TextBlock>
            </Border>
        </Expander>

        <!-- Aperçu requête -->
        <GroupBox Grid.Row="5" Header="Aperçu de la requête">
            <TextBox x:Name="QueryPreview" 
                     IsReadOnly="True" 
                     Background="LightYellow"
                     TextWrapping="Wrap"
                     Margin="10"
                     FontFamily="Consolas"/>
        </GroupBox>

        <!-- Boutons -->
        <StackPanel Grid.Row="6" 
                    Orientation="Horizontal" 
                    HorizontalAlignment="Right">
            <Button Content="Rechercher" 
                    Width="100" 
                    Height="30" 
                    Margin="5"
                    IsDefault="True"
                    Click="Search_Click"/>
            <Button Content="Annuler" 
                    Width="100" 
                    Height="30" 
                    Margin="5"
                    IsCancel="True"
                    Click="Cancel_Click"/>
        </StackPanel>
    </Grid>
</Window>